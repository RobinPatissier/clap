{% extends 'base.html.twig' %}

{% block title %}Rechercher des utilisateurs et des films{% endblock %}

{% block body %}
    <h1>Rechercher des utilisateurs et des films</h1>

    {{ form_start(form) }}
    {{ form_widget(form.pseudo) }}
    {{ form_widget(form.movie) }}
    <button type="submit" class="btn btn-primary">Rechercher</button>
    {{ form_end(form) }}

    {% if users is not empty %}
        <h2>Résultats de la recherche d'utilisateurs</h2>
        <ul>
        {% for user in users %}
            <li>
                {{ user.pseudo }}
                {% if app.user.isFollowing(user) %}
                    <a href="{{ path('user_unfollow', {'id': user.id}) }}" class="btn btn-danger btn-sm">Ne plus suivre</a>
                {% else %}
                    <a href="{{ path('user_follow', {'id': user.id}) }}" class="btn btn-primary btn-sm">Suivre</a>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% elseif form.vars.submitted %}
        <p>Aucun utilisateur trouvé.</p>
    {% endif %}

    {% if movies is not empty %}
        <h2>Résultats de la recherche de films</h2>
        <ul>
        {% for movie in movies %}
            <li>
                <strong>{{ movie.Title }}</strong> ({{ movie.Year }}) - {{ movie.Plot }}
            </li>
        {% endfor %}
        </ul>
    {% elseif form.vars.submitted %}
        <p>Aucun film trouvé.</p>
    {% endif %}
{% endblock %}